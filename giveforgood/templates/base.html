<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    
    {% if title %}
        <title>{{ title }} - Give for Good</title>
    {% else %}
        <title>Welcome - Give for Good</title>
    {% endif %}
</head>
<body class="bg-gray-100 text-gray-900">

    <nav id="main-nav" class="fixed top-0 left-0 w-full z-50 transition-all duration-300 ease-in-out">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="{{ url_for('home') }}" class="font-bold text-2xl text-blue-600">Give for Good</a>
            <div class="space-x-4" id="nav-links-container">
                <a href="{{ url_for('home') }}" class="nav-link font-semibold transition-all duration-300">Home</a>
                <a href="{{ url_for('about') }}" class="nav-link font-semibold transition-all duration-300">About Us</a>
                <a href="{{ url_for('gallery') }}" class="nav-link font-semibold transition-all duration-300">Gallery</a>
                
                <a href="{{ url_for('donate') }}" id="nav-donate-btn" class="font-bold px-4 py-2 rounded-full transition-all duration-300">
                    Donate Now
                </a>
            </div>
        </div>
    </nav>

    <main>
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            <div class="container mx-auto px-6 pt-24">
                {% for category, message in messages %}
                    <div class="{% if category == 'success' %} bg-green-100 border-green-400 text-green-700 {% else %} bg-red-100 border-red-400 text-red-700 {% endif %} border px-4 py-3 rounded relative mb-4" role="alert">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </main>

    <footer class="bg-gray-800 text-white text-center p-6 mt-12">
        <p>&copy; 2025 Give for Good. All rights reserved.</p>
    </footer>


    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            const nav = document.getElementById('main-nav');
            const navLinks = document.querySelectorAll('.nav-link');
            const donateBtn = document.getElementById('nav-donate-btn');

            // Function to apply SCROLLED styles (white bg, dark text)
            function setNavScrolled() {
                nav.classList.add('bg-white', 'shadow-md');
                nav.classList.remove('bg-transparent');
                
                navLinks.forEach(link => {
                    link.classList.add('text-gray-700', 'hover:text-blue-600');
                    link.classList.remove('text-white', 'hover:text-gray-200');
                });

                donateBtn.classList.add('bg-rose-500', 'text-white', 'hover:bg-rose-600');
                donateBtn.classList.remove('text-yellow-400', 'hover:text-yellow-300');
            }

            // Function to apply TOP styles (transparent bg, white text)
            function setNavTop() {
                nav.classList.remove('bg-white', 'shadow-md');
                nav.classList.add('bg-transparent');

                navLinks.forEach(link => {
                    link.classList.add('text-white', 'hover:text-gray-200');
                    link.classList.remove('text-gray-700', 'hover:text-blue-600');
                });

                donateBtn.classList.add('text-yellow-400', 'hover:text-yellow-300');
                donateBtn.classList.remove('bg-rose-500', 'text-white', 'hover:bg-rose-600');
            }

            // --- JINJA LOGIC ---
            // This is the new part that checks the 'is_home' flag
            // 'is_home' is True ONLY on the homepage.
            {% if (is_home) %}
                // This is the homepage. Apply top styles and add scroll listener.
                setNavTop(); // Set initial transparent state
                
                window.addEventListener('scroll', function() {
                    if (window.scrollY > 50) {
                        setNavScrolled();
                    } else {
                        setNavTop();
                    }
                });
            {% else %}
                // This is NOT the homepage. Apply scrolled styles immediately.
                setNavScrolled();
            {% endif %}
            // -------------------
        });
    </script>
    </body>
</html>